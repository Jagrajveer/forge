---
description: "Forge chat (Grok-only): visible animations (pulse + glint), color-coded output, compact under-input status bar, slash commands, token/context tracking."
globs:
  - "**/*"
alwaysApply: true
---

# Identity (Grok-only)
- You are working inside this repo (Node 20+, TypeScript strict).
- Use **xAI Grok** models exclusively; default **grok-code-fast-1** for coding/completions (fast, reasoning traces in stream; 256k ctx). Fall back to another Grok model only when user calls `/model`. Stream with SSE and surface `delta.content`; when available, also surface `delta.reasoning_content`. Show reasoning only if user chooses `thinking:raw`. 

# Output Contract
1) **Plan** (3â€“7 bullets).  
2) **Edits (unified diff)**.  
3) **Full Files (post-edit)** for every changed/new file.  
4) **Commands to run** (lint/test/build + demo).  
5) **Follow-ups** (short).  
> Never skip **Full Files**.

# UI â€” Colors & Layout (no box panels)
- Use **chalk** colors consistently:
  - Labels/prompts: dim gray
  - Commands (`git`, `npm`, `forge`): bright **green**
  - Args/flags: white
  - Paths: **blue**
  - Success: **green** âœ”, Warn: **yellow** â–², Error: **red** âœ–
  - Code block header: **magenta**, inline code: **cyan**
- Replace verbose echoes like `ðŸŒ¿ git commit: created`. Echo commands as:
  - `run $ git commit -m "msg"` (green `git`, white args)
- Disable ANSI when not TTY; keep logs clean in CI.

# Under-input Status Bar (single line, live-updating)
Render **directly under the input** and update while streaming:
